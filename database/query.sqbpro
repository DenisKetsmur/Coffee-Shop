<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="database.db" readonly="0" foreign_keys="1" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="structure browser pragmas query" current="3"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="100"/><column_width id="3" width="3355"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><table title="Categories" custom_title="0" dock_id="1" table="4,10:mainCategories"/><dock_state state="000000ff00000000fd0000000100000002000001ac00000319fc0100000001fc00000000000001ac0000012e00fffffffa000000000100000002fb000000160064006f0063006b00420072006f00770073006500310100000000ffffffff0000012e00fffffffb000000160064006f0063006b00420072006f00770073006500340000000000ffffffff0000000000000000000001ac0000000000000004000000040000000800000008fc00000000"/><default_encoding codec=""/><browse_table_settings><table schema="main" name="Categories" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="35"/><column index="2" value="40"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table></browse_table_settings></tab_browse><tab_sql><sql name="Менеджер*">
--Меню

SELECT name
FROM &quot;Categories&quot;;

SELECT 
	name, 
	price, 
	description 
FROM &quot;Menu&quot;;

SELECT 
	name, 
	price, 
	description 
FROM &quot;Menu&quot;
ORDER BY price DESC;

SELECT 
	name, 
	price, 
	description 
FROM &quot;Menu&quot;
ORDER BY price ASC;

--Опис товару

SELECT 
	m.name,
	m.price,
	c.name as &quot;category&quot;,
	m.measure,
	u.name as &quot;units&quot;,
	m.description
FROM &quot;Menu&quot; m
INNER JOIN &quot;Categories&quot; c
ON m.category_id=c.id
INNER JOIN &quot;Units&quot; u
ON m.units_id=u.id
WHERE m.id = ?;

--Редагування товару

-- UPDATE &quot;Menu&quot;

--Додати товар

INSERT INTO &quot;Menu&quot; (&quot;name&quot;, &quot;price&quot;, &quot;measure&quot;, &quot;units_id&quot;, &quot;category_id&quot;, &quot;description&quot;)
VALUES () ;



--Персонал

SELECT e.first_name, 
	e.last_name, 
	e.phone, 
	l.email,
	p.position, 
	e.status 
FROM &quot;Employees&quot; e
INNER JOIN &quot;Positions&quot; p ON e.position_id=p.id
INNER JOIN &quot;Login&quot; l ON e.login_id=l.id
WHERE e.id!=?;

--Опис працівника

SELECT e.first_name, 
	e.last_name, 
	e.phone, 
	l.email,
	p.position, 
	e.hire_date,
	e.status,
	sh.hours,
	e.payment_per_hour,
	e.work_day,
	e.rest_day
FROM &quot;Employees&quot; e
INNER JOIN &quot;Positions&quot; p ON e.position_id=p.id
INNER JOIN &quot;Login&quot; l ON e.login_id=l.id
INNER JOIN &quot;Shifts&quot; sh ON e.shift_id=sh.id
WHERE e.id=?;

--Редагування працівника

-- UPDATE &quot;Employees&quot;

--Додавання працівника

INSERT INTO &quot;Employees&quot; (&quot;first_name&quot;, &quot;last_name&quot;, &quot;phone&quot;, &quot;email&quot;, &quot;position_id&quot;, &quot;hire_date&quot;, &quot;shift_id&quot;, &quot;work_day&quot;, &quot;rest_day&quot;, &quot;payment_per_hour&quot;)
VALUES ();



--Клієнти

SELECT 
    c.client_name,
    c.phone,
    latest_order.order_date
FROM 
    &quot;Clients&quot; c
JOIN 
    (SELECT client_id, 
			MAX(order_date) AS order_date
     FROM &quot;ClientOrders&quot;
     GROUP BY client_id) AS latest_order
ON c.id = latest_order.client_id;

--Клієнти Опис

SELECT 
    c.client_name,
    c.phone,
    c.email
FROM &quot;Clients&quot; c
WHERE c.id=?;
SELECT 
    co.id AS order_id,
    co.menu_id,
    m.name AS menu_item,
    co.price,
    co.quantity,
    co.order_date
FROM &quot;ClientOrders&quot; co
JOIN &quot;Menu&quot; m ON co.menu_id = m.id
WHERE co.client_id=?;

--Акаунт

SELECT e.first_name, 
	e.last_name,
	p.position, 
	e.phone, 
	l.email,
	e.birth_date,
	e.status,
	sh.hours,
	e.payment_per_hour,
	e.work_day,
	e.rest_day
FROM &quot;Employees&quot; e
INNER JOIN &quot;Positions&quot; p ON e.position_id=p.id
INNER JOIN &quot;Login&quot; l ON e.login_id=l.id
INNER JOIN &quot;Shifts&quot; sh ON e.shift_id=sh.id
WHERE e.id=?;

--Акаунт Редагування

-- UPDATE
</sql><sql name="Адміністратор*">
--Склад

SELECT 
    p.item_name,
    c.name AS category_name,
    SUM(pr.quantity) AS quantity_in_stock,
    u.name AS unit_name
FROM &quot;Products&quot; p
JOIN &quot;Categories&quot; c ON p.category_id=c.id
JOIN &quot;Units&quot; u ON p.unit_id=u.id
LEFT JOIN &quot;Purchases&quot; pr ON p.id=pr.product_id
GROUP BY p.id, c.name, u.name;

--Продукт опис

SELECT 
    p.item_name,
    c.name AS category_name,
    u.name AS unit_name,
    p.description AS product_description,
    SUM(pr.quantity) AS quantity_in_stock
FROM &quot;Products&quot; p
JOIN &quot;Categories&quot; c ON p.category_id=c.id
JOIN &quot;Units&quot; u ON p.unit_id=u.id
LEFT JOIN &quot;Purchases&quot; pr ON p.id=pr.product_id
WHERE p.id=?
GROUP BY p.id, c.name, u.name;

--Продукт редагування

UPDATE

--Постачальники

SELECT 
    s.company_name,
    p.item_name,
    c.name AS category_name
FROM &quot;Suppliers&quot; s
JOIN &quot;Products&quot; p ON s.id=p.supplier_id
JOIN &quot;Categories&quot; c ON p.category_id=c.id
ORDER BY s.company_name, c.name, p.item_name;

--Постачальники Замовлення

SELECT 
    p.item_name,
    p.price,
    u.name AS unit_name
FROM &quot;Suppliers&quot; s
JOIN &quot;Products&quot; p ON s.id=p.supplier_id
JOIN &quot;Units&quot; u ON p.unit_id=u.id
WHERE s.id=?

--Постачальники Опис

SELECT 
    s.company_name,
    s.phone,
    s.email
FROM &quot;Suppliers&quot; s
WHERE s.id=?;

SELECT 
    p.item_name,
    pur.quantity,
    pur.price,
    pur.purchase_date
FROM &quot;Purchases&quot; pur
JOIN &quot;Products&quot; p ON pur.product_id=p.id
WHERE pur.supplier_id=?
ORDER BY pur.purchase_date DESC;

--Постачальники Редагування

UPDATE

--Постачальники Додання

INSERT INTO &quot;Suppliers&quot; (&quot;company_name&quot;, &quot;phone&quot;, &quot;email&quot;)
VALUES ();
INSERT INTO &quot;Products&quot; (&quot;supplier_id&quot;, &quot;category_id&quot;, &quot;item_name&quot;, &quot;price&quot;, &quot;unit_id&quot;, &quot;description&quot;)
VALUES ();

--Акаунт

SELECT e.first_name, 
	e.last_name,
	p.position, 
	e.phone, 
	l.email,
	e.birth_date,
	e.status,
	sh.hours,
	e.payment_per_hour,
	e.work_day,
	e.rest_day
FROM &quot;Employees&quot; e
INNER JOIN &quot;Positions&quot; p ON e.position_id=p.id
INNER JOIN &quot;Login&quot; l ON e.login_id=l.id
INNER JOIN &quot;Shifts&quot; sh ON e.shift_id=sh.id
WHERE e.id=?;

--Акаунт Редагування

-- UPDATE</sql><sql name="Користувач*">
--Вхід

SELECT * FROM &quot;Login&quot; WHERE &quot;email&quot;=?;

--Акаунт користувача

SELECT 
    c.client_name,
    c.phone,
    c.email,
	c.birth_date
FROM &quot;Clients&quot; c
WHERE c.id=?;

SELECT 
    co.id AS order_id,
    co.menu_id,
    m.name AS menu_item,
    co.price,
    co.quantity,
    co.order_date
FROM &quot;ClientOrders&quot; co
JOIN &quot;Menu&quot; m ON co.menu_id = m.id
WHERE co.client_id=?;</sql><current_tab id="2"/></tab_sql></sqlb_project>
